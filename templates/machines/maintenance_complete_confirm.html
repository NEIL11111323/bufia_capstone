{% extends 'base.html' %}

{% block title %}Complete Maintenance - BUFIA Management System{% endblock %}

{% block content %}
<div class="container py-4">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow-sm border-0">
                <div class="card-header bg-success text-white">
                    <h4 class="mb-0"><i class="fas fa-check-circle me-2"></i>Mark Maintenance Complete</h4>
                </div>
                <div class="card-body">
                    <div class="text-center mb-4">
                        <i class="fas fa-tools fa-3x text-success mb-3"></i>
                        <h5>Confirm Maintenance Completion</h5>
                        <p class="text-muted">Are you sure you want to mark this maintenance record as completed?</p>
                    </div>
                    
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle me-2"></i>
                        <span>Completing this maintenance record will set the actual completion date to today's date. If there are no other active maintenance tasks for this machine, its status will be changed to "Available".</span>
                    </div>
                    
                    <div class="card mb-3">
                        <div class="card-header bg-light">
                            <h5 class="mb-0">Maintenance Details</h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <p><strong>Machine:</strong> {{ maintenance.machine.name }}</p>
                                    <p><strong>Maintenance Type:</strong> {{ maintenance.get_maintenance_type_display }}</p>
                                    <p><strong>Status:</strong> {{ maintenance.get_status_display }}</p>
                                </div>
                                <div class="col-md-6">
                                    <p><strong>Scheduled:</strong> {{ maintenance.start_date|date:"d M Y" }}</p>
                                    <p><strong>Est. Completion:</strong> {{ maintenance.end_date|date:"d M Y"|default:"Not specified" }}</p>
                                    <p><strong>Description:</strong> {{ maintenance.description|truncatechars:100 }}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <form method="post">
                        {% csrf_token %}
                        <div class="d-grid gap-2 d-md-flex justify-content-md-center">
                            <a href="{% url 'machines:maintenance_detail' maintenance.id %}" class="btn btn-outline-secondary">
                                <i class="fas fa-times me-2"></i>Cancel
                            </a>
                            <button type="submit" class="btn btn-success">
                                <i class="fas fa-check me-2"></i>Mark as Completed
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 